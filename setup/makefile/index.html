<!DOCTYPE html>
<html lang="en-us">

<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Makefileを用いたビルド &middot; OpenGL Course (JP)
    
  </title>

  
  <link rel="canonical" href="https://tatsy.github.io/OpenGLCourseJP/setup/makefile/">
  

  <link rel="stylesheet" href="https://tatsy.github.io/OpenGLCourseJP/public/css/poole.css">
  <link rel="stylesheet" href="https://tatsy.github.io/OpenGLCourseJP/public/css/syntax.css">
  <link rel="stylesheet" href="https://tatsy.github.io/OpenGLCourseJP/public/css/lanyon.css">
  <link rel="stylesheet" href="https://tatsy.github.io/OpenGLCourseJP/public/css/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://tatsy.github.io/OpenGLCourseJP/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="https://tatsy.github.io/OpenGLCourseJP/public/favicon.ico">

  <script type="text/javascript" src="/OpenGLCourseJP/public/js/jquery.min.js"></script>
  <script type="text/javascript" src="/OpenGLCourseJP/public/js/lightbox.min.js"></script>

  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://tatsy.github.io/OpenGLCourseJP/atom.xml">

  
</head>


<body>

  <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Welcome to OpenGL programming course!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/">Home</a>

    

    
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/open_window/">ウィンドウを開く</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/depth_testing/">深度テスト</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/coordinate_transform/">座標変換</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/hello_shader/">シェーダの利用</a>
        
      
    
      
        
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/hello_triangle/">三角形を描く</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/setup/">環境設定</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/window_resize/">ウィンドウサイズの変更</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="https://tatsy.github.io/OpenGLCourseJP/open_window/">ウィンドウを開く</a>
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="https://github.com/tatsy/OpenGLCourseJP/archive/v1.0.0.zip">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/tatsy/OpenGLCourseJP">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2024. All rights reserved.
    </p>
  </div>
</div>


  <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. -->
  <div class="wrap">
    <div class="masthead">
      <div class="container">
        <h3 class="masthead-title">
          <a href="/OpenGLCourseJP/" title="Home">OpenGL Course (JP)</a>
          <small></small>
        </h3>
      </div>
    </div>

    <div class="container content">
      <div class="page">
  <h1 class="page-title">Makefileを用いたビルド</h1>
  <p>MacやLinuxで作業する際に適当なIDEを使わずにターミナル上で作業する場合には<code class="highlighter-rouge">Makefile</code>を使ってビルドを行う方法もあります。</p>

<p>最初のプログラムである「<a href="/OpenGLCourseJP/open_window/">ウィンドウを開く</a>」では全てのサンプルで使用可能な<code class="highlighter-rouge">Makefile</code>を用意しており、内容は以下のようになっています。このファイルは<a href="https://github.com/tatsy/OpenGLCourseJP/blob/master/src/open_window/Makefile">GitHub</a>からもダウンロードできます。</p>

<figure class="highlight"><pre><code class="language-makefile" data-lang="makefile"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="code"><pre><span class="c"># コンパイラの設定
</span><span class="nv">CC</span>          <span class="o">:=</span> clang
<span class="nv">CXX</span>         <span class="o">:=</span> clang++

<span class="c"># その他のコマンドの設定
</span><span class="nv">RM</span>          <span class="o">:=</span> <span class="nb">rm</span>
<span class="nv">SH</span>          <span class="o">:=</span> bash

<span class="c"># ソースコードの設定 (ファイルを追加する場合はここに足す)
</span><span class="nv">SRC</span>         <span class="o">:=</span> main.cpp
<span class="nv">OBJS</span>        <span class="o">:=</span> <span class="nf">$(</span><span class="nb">patsubst</span> %.cpp, %.o, <span class="nv">$(SRC)</span><span class="nf">)</span>
<span class="nv">DEPS</span>        <span class="o">:=</span> <span class="nf">$(</span><span class="nb">patsubst</span> %.cpp, %.d, <span class="nv">$(SRC)</span><span class="nf">)</span>

<span class="c"># コンパイラ引数の設定 (インクルード・ディレクトリ等)
</span><span class="nv">CFLAGS</span>      <span class="o">:=</span> <span class="nt">-Wall</span> <span class="nt">-g</span> <span class="nt">-O2</span> <span class="nt">-MP</span> <span class="nt">-MMD</span> <span class="nt">-I</span>/usr/include <span class="nt">-I</span>/usr/local/include <span class="nt">-I</span>../../support <span class="nt">-DGL_SILENCE_DEPRECATION</span>
<span class="nv">CXXFLAGS</span>    <span class="o">:=</span> <span class="nt">-std</span><span class="o">=</span>c++11 <span class="nv">$(CFLAGS)</span>

<span class="c"># フレームワークの設定 (Mac特有のもの)
</span><span class="nv">FRAMEWORKS</span>  <span class="o">:=</span> <span class="nt">-framework</span> OpenGL <span class="nt">-framework</span> Cocoa <span class="nt">-framework</span> IOKit <span class="nt">-framework</span> CoreVideo

<span class="c"># リンカ引数の設定
</span><span class="nv">LDFLAGS</span>     <span class="o">:=</span> <span class="nt">-L</span>/usr/lib <span class="nt">-L</span>/usr/local/lib <span class="nt">-lglfw3</span>

<span class="c"># 出来上がるバイナリの名前 (適宜変更する)
</span><span class="nv">PROGRAM</span>     <span class="o">:=</span> open_window

<span class="c"># allターゲットの設定
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">all</span>
<span class="nl">all</span><span class="o">:</span> <span class="nf">$(PROGRAM)</span>

<span class="c"># 依存ファイルのインクルード
</span><span class="k">-include</span><span class="sx"> $(DEPS)</span>

<span class="c"># ソースコードのコンパイル
</span><span class="nl">%.o</span><span class="o">:</span> <span class="nf">%.cpp</span>
	<span class="nv">$(CXX)</span> <span class="nv">$(CXXFLAGS)</span> <span class="nt">-c</span> <span class="nv">$&lt;</span> <span class="nt">-o</span> <span class="nv">$@</span>

<span class="c"># プログラムのリンク
</span><span class="nl">$(PROGRAM)</span><span class="o">:</span> <span class="nf">$(OBJS)</span>
	<span class="nv">$(CXX)</span> <span class="nt">-o</span> <span class="nv">$@</span> <span class="nv">$^</span> <span class="nv">$(LDFLAGS)</span> <span class="nv">$(FRAMEWORKS)</span>

<span class="c"># プログラムの実行
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">run</span>
<span class="nl">run</span><span class="o">:</span> <span class="nf">$(PROGRAM)</span>
	<span class="p">@</span>./<span class="nv">$(PROGRAM)</span>

<span class="c"># コンパイル結果を削除する
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">clean</span>
<span class="nl">clean</span><span class="o">:</span>
	<span class="p">@</span><span class="nv">$(RM)</span> <span class="nv">$(PROGRAM)</span> <span class="nv">$(OBJS)</span> <span class="nv">$(DEPS)</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>自分の環境で使用する際には、コンパイラの設定である<code class="highlighter-rouge">CC</code>および<code class="highlighter-rouge">CXX</code>、そして出来上がるプログラムの名前を設定している<code class="highlighter-rouge">PROGRAM</code>を変更して使うようにしてください。</p>

</div>



    </div>
  </div>

  <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  <footer class="site-footer h-card">
    <data class="u-url" href="//OpenGLCourseJP/"></data>

    <div class="wrapper">
      <div class="container content">
        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
              <li class="p-name">OpenGL Course (JP)</li>
              <li><a class="u-email" href="mailto:tatsy.mail@gmail.com">tatsy.mail@gmail.com</a></li>
            </ul>
          </div>

          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              <li>
                <a href="https://github.com/tatsy">
                  <svg class="svg-icon">
                    <use xlink:href="/OpenGLCourseJP/public/minima-social-icons.svg#github"></use>
                  </svg>
                  <span class="username">tatsy</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-3">
            <p>Welcome to OpenGL programming course!</p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src='/OpenGLCourseJP/public/js/script.js'></script>

</body>

</html>